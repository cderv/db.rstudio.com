---
title: Simplify connections
weight: 6
---

```{r setup}
knitr::opts_chunk$set(eval = FALSE, include = FALSE)
```

## Using the Config Package

The [config](https://github.com/rstudio/config) package simplifies management of environment specific configuration values.  

```{r, eval = FALSE}
devtools::install_github("rstudio/config")
```

The values are saved in a YAML file called **config.yml**.  

```
test:
    server: "my-test-db"
    uid: "testuser"
    pwd: "service-pwd"
    database: "some-db"

production:
    server: "my-prod-db"
    uid: "actual-user"
    pwd: "actual-pwd"
    database: "some-db"

```

Inside the R code, the values from the config file are accessed as:

```r
con <- dbConnect(
        odbc::odbc(),
        Server = config::get("Server"),
        UID = config::get("uid"),
        PWD = config::get("pwd"),
        Database = config::get("database"))
)
```

The config package picks whether to use the `test` or `production` values based on the setting of `R_CONFIG_ACTIVE`. 

## Accessing Credentials

The config package also allows R code to be used as values. This allows the configuration file to reference encrypted credentials via the keyring package.

For example:

```
default:
    server: "my-sql-server"
    pwd: !expr keyring::key_get("my-sql-server-creds")
    database: "some-db"
```

## Comparison to DSN
